{% extends "doctor/base_doctor.html" %}

{% block content %}
<div class="app-container">

    <!-- En-tête -->
    <div class="app-hero-header d-flex align-items-center mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <i class="ri-home-8-line lh-1 pe-3 me-3 border-end"></i>
                <a href="{{ url_for('index_doctor') }}">Tableau de bord</a>
            </li>
            <li class="breadcrumb-item text-primary" aria-current="page">Modifier la consultation</li>
        </ol>
    </div>

    <!-- Formulaire de modification -->
    <div class="app-body">
        <div class="card shadow p-4">
            <h4 class="mb-4"><i class="ri-edit-box-line"></i> Modifier la consultation N°{{ consultation.id }}</h4>

            <p><strong>Patient :</strong> {{ consultation.patient.nom_complet }}</p>
            <p><strong>Date de consultation :</strong> {{ consultation.date_consultation.strftime('%d/%m/%Y') }}</p>

            <form method="POST">
                <!-- Motif -->
                <div class="form-group mb-3">
                    <label for="motif"><strong>Motif</strong></label>
                    <textarea name="motif" id="motif" class="form-control" rows="2"
                        required>{{ consultation.motif or '' }}</textarea>
                </div>

                <!-- Diagnostic -->
                <div class="form-group mb-3">
                    <label for="diagnostic"><strong>Diagnostic</strong></label>
                    <textarea name="diagnostic" id="diagnostic" class="form-control"
                        rows="3">{{ consultation.diagnostic or '' }}</textarea>
                </div>

                <!-- Traitement -->
                <div class="form-group mb-3">
                    <label for="traitement"><strong>Traitement</strong></label>
                    <textarea name="traitement" id="traitement" class="form-control"
                        rows="3">{{ consultation.traitement or '' }}</textarea>
                </div>

                <!-- Prescription -->
                <div class="form-group mb-3">
                    <label for="prescription"><strong>Prescription</strong></label>
                    <textarea name="prescription" id="prescription" class="form-control"
                        rows="2">{{ consultation.prescription or '' }}</textarea>
                </div>

                <div class="d-flex justify-content-end gap-2 mt-4">
                    <a href="{{ url_for('historique_consultations_doctor') }}" class="btn btn-outline-secondary">
                        <i class="ri-arrow-left-line"></i> Retour
                    </a>
                    <button type="submit" class="btn btn-primary">
                        <i class="ri-save-line"></i> Enregistrer les modifications
                    </button>
                </div>
            </form>
        </div>
    </div>

</div>
{% endblock %}